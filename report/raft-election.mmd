stateDiagram-v2
    [*] --> FOLLOWER : Startup
    FOLLOWER --> CANDIDATE : Election timeout\n(no heartbeat)
    CANDIDATE --> LEADER : Wins majority votes
    CANDIDATE --> FOLLOWER : Receives AppendEntries\n(higher/equal term)
    LEADER --> FOLLOWER : Receives higher term
    LEADER --> LEADER : Periodic heartbeats\n(AppendEntries)
    CANDIDATE --> CANDIDATE : Election timeout\n(no quorum)
    FOLLOWER --> FOLLOWER : Reset timer\non valid heartbeat

    note right of FOLLOWER
        • Wait for heartbeats\n
        • Respond to AppendEntries & RequestVote\n
        • Randomized election timer (1500–2000 ms)
    end note

    note right of CANDIDATE
        • Increment term\n
        • Vote for self\n
        • Send RequestVote RPCs\n
        • Count majority to win
    end note

    note right of LEADER
        • Send AppendEntries heartbeats (750 ms)\n
        • Maintain leadership until higher term
    end note
